/* ---------------------------------------------------------------------*//**
 *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 *//* ---------------------------------------------------------------------*/

drop table if exists cifar_10_sample;
create table cifar_10_sample(id INTEGER, y SMALLINT, imgpath TEXT, x  REAL[]);
copy cifar_10_sample from stdin delimiter '|';
1|0|'0/img0.jpg'|{{{202,204,199},{202,204,199},{204,206,201},{206,208,203},{208,210,205},{209,211,206},{210,212,207},{212,214,210},{213,215,212},{215,217,214},{216,218,215},{216,218,215},{215,217,214},{216,218,215},{216,218,215},{216,218,214},{217,219,214},{217,219,214},{218,220,215},{218,219,214},{216,217,212},{217,218,213},{218,219,214},{214,215,209},{213,214,207},{212,213,206},{211,212,205},{209,210,203},{208,209,202},{207,208,200},{205,206,199},{203,204,198}},{{206,208,203},{206,208,203},{207,209,204},{209,211,207},{211,213,209},{212,214,210},{213,215,211},{215,217,214},{216,218,215},{218,220,217},{220,222,219},{220,222,219},{220,222,219},{220,222,220},{221,223,219},{220,222,218},{220,222,217},{221,223,218},{221,223,218},{220,222,217},{218,219,214},{215,216,211},{220,221,216},{220,221,215},{217,218,212},{215,216,210},{214,215,209},{213,214,208},{212,213,207},{210,211,205},{208,209,203},{206,207,201}},{{210,212,207},{211,213,208},{212,214,210},{214,216,213},{215,217,215},{217,219,216},{218,220,217},{219,221,219},{221,223,220},{221,223,220},{222,224,221},{223,225,222},{224,226,223},{226,228,225},{226,228,225},{226,228,224},{226,228,223},{227,229,224},{227,228,223},{226,228,223},{225,226,221},{221,222,217},{221,222,217},{223,224,219},{221,222,218},{219,220,216},{219,220,216},{218,219,214},{216,216,212},{214,214,210},{212,213,208},{210,211,206}},{{212,214,209},{213,215,210},{215,217,213},{217,219,217},{218,220,219},{220,222,221},{222,224,223},{224,226,223},{225,227,224},{226,228,225},{230,232,229},{230,232,229},{228,230,227},{229,231,228},{230,232,229},{231,233,229},{232,234,229},{233,235,230},{233,235,230},{233,235,229},{234,235,230},{232,233,228},{229,230,225},{228,229,226},{228,228,226},{226,226,224},{224,224,222},{222,222,220},{220,220,218},{218,218,216},{216,216,213},{213,214,209}},{{215,217,212},{216,218,213},{218,220,215},{219,221,219},{221,223,222},{222,224,223},{224,226,225},{225,227,224},{227,229,225},{224,226,223},{209,211,209},{223,224,222},{232,234,231},{232,234,231},{234,236,233},{235,237,232},{237,239,234},{237,239,235},{238,240,235},{240,241,237},{240,241,236},{240,241,236},{240,241,236},{238,239,236},{237,237,235},{236,236,234},{234,234,232},{231,231,229},{228,229,227},{225,225,223},{221,221,219},{218,219,215}},{{218,220,217},{218,220,216},{220,222,218},{221,223,221},{223,225,222},{225,227,224},{226,228,225},{226,228,223},{232,235,228},{183,185,183},{79,80,84},{155,157,160},{236,238,235},{235,237,232},{236,238,236},{239,241,237},{241,243,240},{244,245,244},{244,246,245},{241,245,243},{242,245,242},{243,245,240},{245,246,241},{246,246,242},{245,246,241},{245,246,242},{244,245,241},{243,244,241},{240,241,239},{236,238,235},{232,234,231},{228,230,228}},{{221,223,220},{221,223,220},{222,224,221},{224,226,223},{226,228,224},{230,232,229},{232,234,231},{231,233,229},{235,238,232},{170,172,171},{34,34,42},{92,92,101},{223,224,224},{238,240,234},{238,240,236},{235,237,234},{216,218,216},{194,195,196},{200,202,205},{237,242,242},{244,247,245},{245,246,242},{247,248,242},{248,249,244},{249,250,245},{250,251,246},{250,251,246},{250,252,248},{249,251,248},{247,249,246},{246,248,245},{243,245,243}},{{222,224,221},{223,225,222},{225,227,224},{227,229,226},{230,232,229},{187,189,186},{172,174,171},{227,229,228},{243,245,241},{179,181,180},{38,38,46},{47,47,60},{191,192,197},{240,243,237},{242,245,238},{186,188,185},{82,84,83},{63,64,67},{72,73,77},{184,188,189},{246,250,249},{245,246,244},{247,248,244},{249,250,245},{249,250,245},{250,251,246},{251,253,248},{252,254,251},{252,254,251},{252,254,251},{252,254,252},{252,254,253}},{{222,224,221},{223,225,222},{226,228,225},{229,231,228},{233,235,232},{158,161,157},{72,74,72},{107,108,110},{190,192,191},{183,184,184},{44,45,52},{26,25,39},{135,135,141},{241,243,239},{246,248,243},{152,154,152},{37,38,39},{46,47,51},{47,48,53},{96,100,103},{223,226,228},{248,249,248},{247,247,245},{249,250,245},{249,250,245},{250,251,246},{250,251,246},{250,252,249},{250,252,250},{251,253,250},{251,253,250},{251,253,252}},{{222,225,221},{222,224,221},{225,228,224},{229,231,228},{232,234,231},{220,222,219},{163,165,163},{81,81,86},{70,71,74},{98,100,100},{41,41,48},{23,23,35},{76,77,83},{202,204,203},{221,223,223},{124,125,126},{42,43,46},{52,53,58},{51,52,59},{51,54,59},{158,161,164},{248,249,250},{248,248,248},{249,250,246},{249,250,245},{250,251,246},{250,251,246},{250,252,248},{250,252,249},{250,252,249},{250,252,249},{250,252,251}},{{223,225,223},{223,225,223},{227,228,226},{230,232,229},{231,233,231},{234,236,233},{236,238,236},{195,196,200},{103,104,107},{38,39,40},{25,26,30},{32,33,41},{39,41,45},{81,82,85},{93,95,99},{70,71,74},{46,47,51},{48,49,54},{48,50,56},{42,46,51},{81,84,87},{219,220,222},{251,251,251},{249,250,245},{249,250,245},{250,251,246},{250,251,246},{250,252,248},{250,252,249},{249,251,248},{249,251,248},{249,251,250}},{{224,224,225},{225,225,226},{228,228,229},{230,231,230},{232,234,233},{233,235,233},{234,236,235},{235,237,234},{212,214,211},{125,127,125},{24,26,26},{16,18,21},{28,30,34},{35,37,41},{48,50,54},{50,52,56},{56,59,62},{52,55,59},{43,46,50},{47,53,58},{47,53,57},{145,148,149},{246,247,246},{250,251,246},{251,252,246},{251,252,247},{251,252,247},{251,252,247},{251,252,247},{250,251,247},{250,251,247},{250,251,249}},{{224,224,226},{225,225,227},{228,228,230},{230,231,231},{232,234,233},{234,235,235},{235,237,235},{235,237,232},{241,243,238},{148,150,147},{19,21,21},{12,13,17},{12,13,17},{19,20,24},{29,30,34},{28,29,33},{51,52,56},{53,54,58},{35,37,41},{40,46,52},{57,63,67},{70,73,76},{168,168,170},{247,248,244},{251,252,247},{251,252,247},{251,252,247},{251,252,247},{252,253,248},{251,252,247},{251,252,247},{251,251,249}},{{224,224,226},{225,225,227},{228,228,230},{229,231,231},{232,234,232},{233,235,234},{235,237,236},{238,240,236},{226,228,224},{86,88,88},{11,12,14},{17,17,21},{13,12,17},{11,10,15},{10,9,14},{13,13,17},{22,22,26},{22,21,26},{21,21,26},{44,48,54},{46,51,56},{30,33,38},{70,73,77},{214,214,214},{253,253,250},{250,251,247},{251,252,247},{251,252,247},{251,252,247},{252,253,248},{252,253,248},{251,251,249}},{{224,224,226},{224,224,226},{226,226,228},{228,229,229},{229,231,230},{229,231,230},{229,231,230},{233,235,233},{208,210,208},{62,64,65},{10,10,14},{11,10,15},{11,10,15},{11,10,15},{9,8,13},{9,8,13},{9,7,12},{10,8,13},{14,13,18},{29,31,36},{27,30,36},{28,32,39},{45,49,56},{168,169,172},{252,252,252},{250,250,247},{250,251,246},{251,252,246},{251,252,247},{251,252,247},{251,252,247},{251,251,249}},{{224,224,226},{224,224,226},{225,225,226},{225,226,226},{226,228,227},{225,227,226},{227,229,228},{230,232,230},{200,201,202},{57,58,62},{10,11,16},{11,9,14},{11,9,14},{14,12,17},{13,10,15},{9,7,12},{8,6,11},{10,8,13},{9,7,12},{22,21,26},{27,29,35},{38,42,51},{46,52,62},{115,115,122},{236,235,237},{251,251,248},{250,251,245},{251,252,246},{251,252,247},{251,252,247},{251,252,247},{251,251,249}},{{223,224,225},{223,224,225},{227,227,229},{230,231,232},{230,231,232},{222,224,224},{191,193,193},{156,157,158},{139,140,142},{44,45,48},{9,10,15},{12,9,15},{13,10,15},{13,10,15},{15,11,17},{16,12,18},{11,7,13},{11,7,13},{9,6,12},{15,14,19},{25,27,33},{41,46,55},{52,58,69},{49,52,61},{165,166,170},{252,254,252},{250,251,246},{251,252,246},{251,252,247},{251,252,247},{251,252,247},{251,251,249}},{{220,222,222},{220,222,221},{182,183,187},{158,159,163},{158,159,162},{121,122,126},{77,78,81},{40,41,45},{32,33,37},{14,15,19},{8,8,12},{10,8,12},{11,9,12},{11,9,12},{12,9,13},{14,12,17},{13,10,16},{9,6,12},{7,4,10},{8,7,12},{18,19,24},{32,35,42},{40,45,54},{32,40,46},{66,73,76},{171,175,176},{244,246,244},{251,252,248},{252,253,247},{252,253,247},{252,253,248},{252,252,250}},{{219,221,220},{206,208,206},{96,97,101},{39,39,46},{47,48,55},{35,35,42},{34,34,41},{30,30,35},{22,23,27},{19,20,24},{7,8,12},{8,6,9},{10,8,11},{9,7,10},{9,7,10},{8,6,10},{8,6,11},{6,4,9},{7,5,10},{9,8,13},{10,10,15},{19,21,27},{35,39,47},{48,56,62},{39,47,50},{59,64,66},{197,200,201},{253,254,251},{251,252,247},{252,253,248},{252,253,249},{253,253,252}},{{223,225,225},{186,188,186},{60,61,65},{25,25,33},{30,30,39},{35,35,44},{34,34,42},{31,32,37},{27,28,31},{25,26,30},{16,17,21},{7,6,9},{11,9,12},{11,9,12},{8,6,9},{7,5,9},{7,5,9},{6,4,8},{8,6,9},{12,10,13},{10,9,13},{10,10,16},{35,38,44},{47,54,59},{53,60,64},{46,51,55},{113,118,122},{241,242,241},{252,252,249},{251,251,249},{252,252,249},{252,252,251}},{{227,228,228},{198,200,198},{80,81,84},{39,39,45},{30,31,37},{23,24,30},{20,20,26},{23,24,28},{23,24,28},{24,25,29},{19,20,24},{10,8,12},{9,6,9},{11,9,12},{5,3,6},{6,4,6},{6,4,6},{6,4,6},{8,6,8},{13,9,11},{10,7,10},{11,10,15},{23,24,30},{36,39,44},{49,54,59},{52,59,65},{69,76,82},{212,213,214},{254,254,253},{250,250,249},{250,250,249},{251,251,250}},{{225,227,226},{223,225,223},{180,181,184},{150,152,154},{119,121,121},{78,80,80},{48,49,50},{26,27,31},{17,17,22},{13,13,18},{12,13,17},{14,13,16},{8,6,9},{6,4,7},{4,2,5},{5,3,4},{5,3,3},{4,2,3},{8,6,7},{14,10,10},{11,7,9},{12,10,14},{18,18,23},{24,25,30},{45,49,54},{60,68,76},{50,58,67},{163,165,167},{250,250,249},{249,249,249},{250,250,250},{250,250,250}},{{222,223,224},{222,224,223},{225,226,229},{226,228,228},{218,220,219},{199,201,200},{169,172,171},{133,135,137},{96,98,101},{62,64,67},{39,41,44},{29,29,31},{18,16,19},{8,6,9},{4,3,5},{4,2,4},{6,4,6},{7,5,6},{10,8,9},{13,9,10},{14,10,12},{16,14,17},{15,15,19},{20,20,25},{28,31,37},{44,49,57},{47,54,63},{96,100,105},{224,225,227},{251,251,252},{250,249,249},{250,249,250}},{{216,217,219},{211,212,214},{211,212,214},{212,214,215},{211,214,215},{208,210,211},{199,201,202},{185,187,189},{162,165,167},{128,130,132},{87,89,91},{63,63,65},{53,53,55},{43,43,45},{33,32,34},{24,24,26},{21,20,22},{18,17,19},{14,14,15},{9,8,10},{11,10,12},{13,13,15},{12,12,15},{25,25,31},{23,23,31},{20,21,28},{34,36,44},{65,71,81},{177,181,189},{251,251,254},{251,247,249},{250,249,250}},{{202,203,205},{183,184,186},{165,166,168},{147,148,150},{135,136,138},{138,139,141},{141,142,144},{140,141,143},{133,134,136},{118,119,121},{93,94,96},{73,73,75},{70,70,72},{69,69,71},{67,67,69},{62,62,64},{57,57,59},{63,63,65},{50,51,53},{42,42,44},{37,37,39},{24,24,26},{15,15,17},{17,18,23},{17,18,24},{12,13,19},{19,20,26},{37,42,52},{107,111,119},{229,228,232},{251,248,250},{248,247,249}},{{194,195,197},{168,169,171},{134,135,137},{94,94,96},{70,70,72},{68,68,70},{70,70,72},{71,71,73},{72,72,74},{72,72,74},{67,67,69},{59,59,61},{58,58,60},{60,60,62},{61,61,63},{62,62,64},{78,78,80},{92,92,94},{99,99,101},{102,102,104},{115,115,117},{121,121,123},{116,116,118},{104,104,109},{90,91,95},{75,76,81},{54,55,60},{62,64,71},{112,112,119},{212,211,215},{251,249,251},{247,246,248}},{{187,188,190},{160,161,163},{124,125,127},{84,83,86},{66,65,67},{62,61,64},{59,58,61},{58,57,59},{56,55,58},{54,54,56},{53,52,55},{52,52,54},{54,54,56},{56,56,58},{57,57,59},{60,60,62},{71,71,73},{77,77,79},{96,96,98},{105,105,107},{123,123,125},{150,150,152},{175,175,177},{192,193,196},{202,203,206},{202,203,206},{189,190,193},{194,194,198},{217,216,220},{239,237,241},{248,246,249},{247,247,249}},{{190,191,193},{160,162,163},{120,121,123},{81,79,82},{68,65,69},{65,62,65},{61,59,62},{58,56,59},{55,52,56},{52,50,53},{51,49,52},{49,49,51},{50,50,52},{51,52,54},{54,54,56},{54,54,56},{52,52,54},{58,58,60},{75,75,77},{92,92,94},{112,112,114},{136,136,138},{160,160,162},{183,183,185},{203,204,206},{224,225,227},{243,243,245},{251,248,250},{249,246,248},{246,244,247},{246,244,248},{246,245,248}},{{206,207,210},{184,185,188},{149,149,152},{104,102,105},{73,71,73},{64,62,64},{61,60,62},{60,57,60},{57,53,57},{55,51,55},{53,49,53},{51,49,52},{50,50,52},{50,49,52},{50,50,52},{48,48,50},{48,47,50},{53,52,54},{64,64,66},{84,83,85},{105,105,107},{129,129,131},{152,152,154},{174,175,177},{194,195,197},{213,214,216},{228,228,230},{239,237,239},{244,241,244},{244,243,246},{245,244,248},{245,244,247}},{{218,217,222},{210,209,214},{194,194,198},{161,162,162},{115,117,116},{79,80,79},{60,62,61},{57,58,59},{57,56,58},{57,52,56},{55,50,54},{52,49,53},{50,48,51},{49,48,51},{49,48,51},{50,49,52},{51,49,52},{54,52,55},{61,59,62},{78,77,79},{98,98,100},{120,120,122},{143,143,145},{166,166,168},{187,187,189},{208,208,210},{224,224,226},{236,235,239},{241,240,245},{243,242,247},{244,242,247},{243,243,247}},{{219,218,223},{217,216,221},{216,216,220},{206,207,208},{182,184,184},{144,146,145},{100,102,102},{70,71,72},{57,56,58},{54,51,54},{54,49,53},{51,49,52},{49,48,51},{49,47,50},{50,48,51},{52,50,53},{54,52,55},{55,53,56},{59,57,60},{72,72,74},{92,92,94},{111,111,113},{133,133,135},{156,156,158},{179,179,181},{200,200,202},{217,217,219},{230,230,234},{238,237,242},{241,240,245},{241,240,245},{241,240,245}},{{217,216,221},{216,215,220},{217,216,221},{216,217,219},{212,213,214},{198,199,201},{170,171,172},{131,133,135},{94,95,97},{69,68,70},{58,55,58},{53,51,54},{52,50,53},{52,50,53},{51,49,52},{52,50,53},{54,52,55},{55,53,56},{59,57,60},{69,68,70},{86,86,88},{104,104,106},{125,125,127},{147,147,149},{172,172,174},{193,193,195},{210,210,212},{224,223,227},{233,232,237},{239,238,243},{239,238,243},{240,238,243}}}
2|1|'0/img2.jpg'|{{{126,118,110},{122,115,108},{126,119,111},{127,119,109},{130,122,111},{130,122,111},{132,124,113},{133,125,114},{130,122,111},{132,124,113},{134,126,115},{131,123,112},{131,123,112},{134,126,115},{133,125,114},{136,128,117},{137,129,118},{137,129,118},{136,128,117},{131,123,112},{130,122,111},{132,124,113},{132,124,113},{132,124,113},{129,122,110},{127,121,109},{127,121,109},{125,119,107},{124,118,106},{124,118,106},{120,114,102},{117,111,99}},{{122,115,107},{119,112,104},{121,114,106},{124,116,107},{129,121,110},{130,122,111},{130,122,111},{130,122,111},{128,120,109},{131,123,112},{134,126,115},{132,124,113},{132,124,113},{134,126,115},{136,128,117},{139,131,120},{141,133,122},{138,130,119},{135,127,116},{130,122,111},{131,123,112},{132,124,113},{133,125,114},{133,125,114},{131,124,113},{129,123,111},{130,124,112},{129,123,111},{127,121,109},{124,118,106},{122,116,104},{117,111,99}},{{122,115,107},{121,114,106},{121,114,106},{125,118,108},{128,120,109},{129,121,110},{131,123,112},{130,122,111},{128,120,109},{131,123,112},{133,125,114},{134,126,115},{136,128,117},{137,129,118},{138,130,119},{139,131,120},{139,131,120},{139,131,120},{139,131,120},{139,131,120},{139,131,120},{137,129,118},{137,129,118},{138,130,119},{136,129,118},{135,129,117},{133,127,115},{130,124,112},{129,123,111},{126,120,108},{123,117,105},{121,115,103}},{{123,116,108},{123,116,108},{125,118,110},{127,119,109},{127,119,108},{129,121,110},{132,125,113},{131,123,112},{130,122,111},{134,127,115},{134,126,115},{135,127,116},{133,125,114},{134,126,116},{136,128,118},{140,132,121},{142,134,123},{141,133,122},{141,132,122},{142,133,123},{141,132,122},{141,133,122},{140,131,120},{137,128,117},{136,128,117},{136,130,118},{132,127,115},{128,122,110},{127,121,109},{127,121,109},{125,119,107},{123,117,105}},{{124,119,110},{125,119,111},{128,122,113},{129,123,113},{132,123,113},{136,123,115},{137,125,116},{134,125,116},{135,125,116},{136,125,116},{134,125,115},{133,126,116},{136,124,115},{135,127,113},{137,131,115},{140,130,118},{141,130,120},{139,131,120},{137,132,118},{135,133,117},{134,130,117},{136,130,118},{136,130,119},{134,129,117},{132,127,115},{132,126,114},{131,125,113},{131,124,112},{129,122,110},{127,121,109},{128,122,110},{128,122,110}},{{124,121,112},{124,121,112},{128,124,115},{129,125,116},{136,124,118},{145,124,121},{143,126,121},{136,128,120},{136,126,119},{140,123,118},{136,126,118},{133,129,121},{146,130,130},{136,130,115},{135,133,112},{138,131,117},{138,130,119},{139,132,120},{137,132,117},{133,132,113},{132,131,115},{135,130,118},{136,129,118},{135,130,118},{131,127,115},{132,124,113},{132,124,113},{131,123,112},{129,122,110},{128,122,110},{127,121,109},{127,121,109}},{{123,120,111},{122,119,110},{124,121,112},{126,122,113},{132,122,115},{138,125,119},{135,128,120},{128,130,119},{130,129,119},{134,124,117},{127,118,110},{129,126,120},{142,135,139},{154,139,136},{141,130,123},{130,133,125},{131,135,121},{138,135,122},{143,130,122},{145,124,120},{142,126,119},{140,128,118},{141,128,119},{142,126,118},{139,125,116},{134,126,115},{134,126,115},{133,125,114},{131,123,112},{129,122,110},{126,120,108},{124,118,106}},{{121,118,109},{121,118,109},{122,119,110},{123,118,109},{127,121,113},{130,126,117},{131,131,121},{134,136,125},{130,131,121},{133,130,121},{133,127,119},{136,131,123},{115,104,98},{128,91,93},{151,118,117},{139,136,125},{135,137,122},{140,136,124},{139,132,124},{141,131,126},{140,128,121},{136,129,117},{134,131,118},{135,128,117},{137,126,116},{135,127,116},{135,127,116},{133,125,114},{131,123,112},{128,122,110},{127,121,109},{125,119,107}},{{124,121,112},{124,121,112},{126,123,114},{127,122,113},{128,124,115},{132,130,121},{138,131,123},{162,149,143},{156,144,138},{137,133,124},{141,136,128},{143,136,125},{137,120,105},{119,80,78},{144,108,108},{147,136,125},{142,133,123},{146,133,124},{149,134,123},{148,132,120},{151,130,121},{140,129,119},{127,134,118},{126,133,117},{131,128,116},{135,127,116},{134,126,115},{132,124,113},{130,122,111},{128,122,110},{128,122,110},{126,120,108}},{{126,123,114},{126,123,114},{128,125,116},{130,127,118},{129,129,119},{135,131,122},{143,122,119},{142,106,108},{163,131,132},{147,134,128},{140,136,127},{139,132,124},{141,134,128},{120,115,122},{134,131,142},{151,151,155},{143,139,133},{154,128,121},{152,90,85},{155,61,56},{158,77,80},{155,115,115},{141,131,121},{133,131,118},{135,128,117},{135,127,116},{134,126,115},{132,124,113},{130,123,112},{129,123,111},{126,120,108},{126,120,108}},{{126,121,112},{126,121,113},{130,125,116},{131,126,116},{131,128,117},{134,127,119},{141,123,120},{110,64,71},{121,57,65},{151,117,110},{143,135,122},{132,134,122},{136,138,130},{102,114,121},{80,97,121},{90,107,138},{130,146,164},{149,133,146},{142,71,84},{165,54,64},{151,34,43},{150,63,65},{159,116,110},{142,131,119},{134,130,118},{135,127,116},{136,128,117},{134,126,115},{131,123,112},{130,124,112},{126,120,108},{124,118,106}},{{129,122,114},{128,121,114},{131,124,116},{133,127,115},{135,129,117},{136,129,120},{138,132,127},{150,123,127},{144,96,100},{152,120,109},{144,129,114},{131,128,119},{171,174,177},{160,168,180},{132,146,167},{97,117,145},{106,131,159},{136,135,162},{150,112,134},{186,129,141},{202,129,128},{149,78,70},{159,118,107},{146,134,121},{135,132,119},{136,128,117},{136,128,117},{136,128,117},{134,126,115},{134,128,116},{131,125,113},{126,120,108}},{{133,126,118},{132,125,117},{134,127,119},{136,130,118},{136,130,118},{138,132,123},{139,131,126},{113,113,117},{126,135,146},{168,171,175},{149,142,143},{119,111,122},{148,157,188},{194,207,232},{166,178,191},{159,172,180},{180,194,207},{191,192,207},{170,156,167},{189,168,173},{211,196,191},{149,139,127},{147,135,123},{149,136,123},{145,134,122},{140,132,121},{138,130,119},{136,128,117},{132,125,113},{132,126,114},{131,125,113},{128,122,110}},{{134,127,119},{135,128,120},{136,128,121},{136,130,118},{137,131,119},{137,131,122},{142,134,128},{90,93,108},{33,52,92},{89,107,144},{145,161,193},{152,169,196},{116,138,164},{133,151,175},{167,177,200},{189,194,216},{207,211,225},{210,216,225},{204,212,217},{203,212,214},{173,170,171},{143,132,131},{146,137,129},{145,137,122},{144,136,120},{141,133,122},{139,131,120},{138,130,119},{133,125,114},{130,124,112},{128,122,110},{126,120,108}},{{131,124,116},{134,128,120},{135,128,120},{136,130,118},{139,133,121},{138,131,122},{109,101,95},{121,117,130},{103,109,150},{52,67,114},{60,87,130},{108,140,172},{150,174,198},{146,165,191},{128,141,172},{140,148,181},{158,164,187},{169,181,196},{183,201,208},{183,195,199},{154,140,144},{156,133,132},{150,137,128},{142,138,121},{141,138,121},{141,133,122},{137,129,118},{136,128,117},{135,127,116},{133,127,115},{129,123,111},{128,122,110}},{{132,124,116},{130,121,114},{135,126,120},{140,131,122},{140,134,122},{138,135,124},{125,119,115},{157,159,162},{162,174,189},{140,149,179},{140,154,186},{131,146,177},{99,114,155},{137,152,188},{164,182,209},{164,182,203},{156,170,195},{146,162,184},{147,161,179},{168,173,191},{159,159,158},{147,144,128},{146,139,124},{146,139,123},{143,135,123},{142,134,124},{136,128,117},{133,125,114},{134,127,116},{127,121,109},{129,123,111},{129,123,111}},{{141,129,119},{136,122,116},{135,124,120},{141,129,128},{135,130,122},{148,152,145},{185,191,204},{141,169,193},{119,147,170},{181,181,202},{192,200,212},{204,203,220},{167,172,199},{132,143,172},{119,136,168},{137,160,193},{169,188,213},{185,192,204},{175,177,202},{92,107,179},{97,120,166},{134,143,141},{149,140,126},{147,137,121},{140,132,126},{140,131,128},{138,131,116},{137,129,115},{137,128,119},{133,125,115},{131,124,112},{129,122,111}},{{139,129,117},{132,130,117},{127,134,120},{131,137,124},{157,154,155},{180,178,199},{118,136,175},{89,115,149},{153,146,163},{192,179,185},{182,207,197},{193,217,214},{202,206,219},{193,200,218},{171,186,209},{129,149,182},{96,125,171},{137,161,179},{169,183,203},{53,62,153},{34,44,157},{102,112,172},{124,127,141},{145,138,133},{143,133,125},{140,133,117},{139,132,117},{137,129,117},{136,128,116},{137,129,118},{135,127,116},{130,122,111}},{{134,128,114},{137,129,112},{143,130,112},{145,90,76},{165,123,127},{107,118,147},{94,115,158},{162,137,167},{152,76,85},{165,113,119},{207,202,202},{200,212,217},{213,213,226},{223,226,236},{220,229,236},{210,224,231},{150,175,200},{71,107,153},{104,138,195},{107,119,184},{50,51,159},{70,83,198},{60,77,162},{114,111,149},{140,126,118},{136,130,103},{133,125,112},{136,127,117},{134,126,110},{135,127,115},{134,126,115},{129,121,110}},{{137,127,114},{154,108,97},{159,66,64},{168,25,19},{151,29,30},{117,61,76},{168,148,162},{201,168,175},{180,136,140},{192,168,177},{222,207,225},{228,224,240},{219,216,222},{187,186,189},{189,190,189},{214,215,210},{233,229,229},{181,198,221},{77,114,170},{93,124,184},{133,149,200},{68,82,181},{33,46,185},{86,86,176},{134,125,146},{137,128,123},{136,128,117},{135,128,113},{134,126,112},{132,124,113},{131,123,112},{129,121,110}},{{139,122,111},{133,65,55},{151,14,14},{167,15,13},{174,17,17},{171,20,23},{155,53,47},{191,142,135},{216,219,216},{213,237,237},{214,218,224},{166,172,170},{95,92,90},{46,40,39},{51,45,44},{82,74,75},{125,112,115},{164,166,160},{147,167,173},{55,80,130},{118,138,172},{139,150,196},{64,67,163},{104,112,203},{113,111,187},{121,103,148},{140,131,120},{136,129,106},{133,124,120},{130,122,113},{129,121,110},{127,119,108}},{{140,121,112},{133,85,73},{137,45,37},{147,29,31},{162,20,19},{180,18,10},{173,19,14},{161,56,61},{181,157,159},{148,152,149},{90,79,74},{44,39,25},{55,47,39},{69,59,54},{57,45,43},{43,31,31},{33,28,24},{34,29,26},{54,48,52},{58,57,67},{73,79,100},{142,144,158},{137,137,155},{113,126,182},{84,89,183},{102,86,158},{130,123,125},{135,128,110},{135,123,122},{131,121,111},{128,120,107},{126,118,106}},{{135,124,117},{106,91,83},{65,46,39},{114,58,55},{154,47,45},{162,31,28},{145,27,26},{99,25,26},{61,33,30},{39,31,22},{52,47,36},{97,89,77},{135,124,111},{143,132,119},{137,125,113},{126,114,102},{110,99,92},{93,81,78},{74,60,59},{63,51,47},{80,71,69},{114,110,107},{132,133,133},{129,139,151},{141,151,187},{166,169,211},{173,172,189},{140,133,131},{134,123,112},{133,123,107},{129,120,104},{127,119,104}},{{129,120,112},{68,60,52},{19,12,5},{33,27,22},{73,42,41},{81,26,28},{50,12,14},{32,15,11},{51,37,28},{92,85,73},{133,125,114},{151,137,127},{147,135,121},{144,132,118},{147,135,121},{149,137,123},{150,138,125},{148,136,124},{145,133,120},{137,125,113},{115,105,92},{85,79,69},{101,101,95},{128,133,130},{159,169,173},{199,211,219},{225,231,232},{184,185,176},{133,129,114},{129,122,107},{127,119,105},{125,117,104}},{{128,120,109},{109,101,91},{76,67,58},{25,33,23},{14,17,12},{30,18,16},{45,42,38},{78,81,71},{120,115,100},{140,131,118},{144,128,117},{145,126,116},{144,132,118},{144,132,118},{145,133,119},{145,133,119},{142,131,114},{145,134,115},{147,136,118},{148,137,119},{146,137,118},{128,122,105},{97,93,79},{90,89,78},{116,120,113},{155,163,161},{200,206,205},{220,225,226},{178,181,181},{127,125,116},{122,118,107},{124,117,104}},{{125,117,104},{124,116,104},{129,122,109},{99,95,79},{72,63,51},{93,76,70},{126,111,100},{136,130,113},{136,133,114},{142,128,113},{135,116,103},{129,112,99},{130,118,104},{137,125,111},{142,130,116},{144,132,118},{142,131,113},{144,133,114},{145,134,115},{145,134,115},{144,134,117},{144,135,119},{142,134,118},{112,104,89},{79,72,64},{96,92,94},{147,146,154},{194,197,211},{222,228,241},{170,174,170},{119,119,110},{123,117,104}},{{124,117,101},{120,113,97},{125,118,103},{131,121,104},{130,120,109},{136,124,119},{143,126,117},{139,127,110},{139,132,113},{146,129,114},{142,125,109},{132,123,105},{134,123,109},{141,129,115},{142,130,116},{143,131,117},{141,129,114},{144,132,117},{145,133,118},{144,132,117},{140,128,116},{140,128,117},{144,131,119},{145,131,118},{131,115,104},{99,84,77},{86,77,74},{112,112,114},{166,172,176},{203,211,209},{153,156,149},{120,115,103}},{{124,117,103},{122,115,101},{130,122,109},{130,122,109},{127,122,112},{130,125,118},{134,125,116},{138,128,114},{140,130,113},{142,127,112},{140,126,111},{138,129,113},{142,130,116},{139,127,113},{134,122,108},{142,130,116},{141,129,116},{142,130,117},{144,132,119},{143,131,118},{133,122,111},{136,126,116},{140,128,118},{139,127,116},{141,127,113},{140,126,110},{119,110,96},{92,88,75},{81,81,71},{120,120,114},{156,154,145},{123,117,105}},{{126,117,106},{128,120,109},{130,122,111},{129,121,110},{131,122,111},{132,124,113},{133,125,114},{136,126,114},{139,127,113},{138,126,112},{138,126,112},{140,128,114},{139,127,113},{137,125,111},{135,123,109},{142,130,116},{140,128,114},{140,128,114},{140,128,114},{140,128,114},{136,126,114},{136,128,117},{137,129,118},{137,129,118},{134,126,114},{134,127,111},{137,130,115},{136,128,113},{119,112,97},{97,89,78},{113,105,93},{121,113,102}},{{126,118,107},{126,118,107},{128,120,109},{130,122,111},{130,122,111},{131,123,112},{134,126,115},{136,126,114},{137,125,111},{137,125,111},{136,124,110},{139,127,113},{139,127,113},{139,127,113},{137,125,111},{138,126,112},{138,126,112},{138,126,112},{139,127,113},{139,127,113},{135,125,113},{138,130,119},{142,134,123},{141,133,122},{140,132,120},{138,130,117},{138,130,117},{135,127,114},{138,130,118},{133,125,114},{122,114,103},{114,106,95}},{{125,117,106},{126,118,107},{127,119,108},{129,121,110},{129,121,110},{129,121,110},{133,125,114},{133,123,111},{134,122,108},{135,123,109},{136,124,110},{138,126,112},{138,126,112},{136,124,110},{135,123,109},{136,124,110},{136,124,110},{137,125,111},{139,127,113},{138,126,112},{136,127,115},{138,130,119},{142,134,123},{140,132,121},{138,130,119},{134,126,115},{135,127,116},{135,127,116},{132,124,113},{128,120,109},{121,113,102},{114,106,95}},{{123,115,104},{123,115,104},{126,118,107},{128,120,109},{129,121,110},{129,121,110},{131,123,112},{132,122,110},{133,121,107},{135,123,109},{135,123,109},{135,123,109},{136,124,110},{133,121,107},{134,122,108},{136,124,110},{136,124,110},{137,125,111},{134,122,108},{130,118,104},{133,123,111},{133,125,115},{136,128,117},{136,128,117},{135,127,117},{134,125,116},{132,123,114},{131,122,113},{129,121,111},{128,119,109},{126,118,107},{121,113,102}}}
\.

drop table if exists cifar_10_sample_val;
create table cifar_10_sample_val(id INTEGER,dependent_var SMALLINT[], independent_var  REAL[] );
copy cifar_10_sample_val from stdin delimiter '|';
1|{0,1}|{{{248,248,250},{245,245,246},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247}},{{248,248,250},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247},{245,245,247}},{{249,249,251},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248}},{{249,249,251},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248}},{{249,249,251},{245,245,247},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,249},{246,246,249},{246,246,249},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,249},{246,246,249},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248}},{{249,249,251},{245,245,247},{246,246,248},{247,246,249},{247,246,248},{246,246,247},{245,246,248},{246,246,251},{247,245,252},{247,245,251},{247,245,250},{247,245,250},{248,245,249},{247,245,248},{246,243,247},{246,243,247},{245,244,248},{244,244,248},{246,245,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,245,249},{246,246,249},{245,246,249},{245,246,249},{246,246,247},{246,246,246},{246,246,247}},{{249,249,251},{245,245,247},{246,246,248},{247,246,248},{247,246,248},{247,246,249},{246,246,250},{245,246,250},{245,246,248},{245,246,247},{246,246,247},{246,246,247},{247,246,247},{246,246,247},{245,244,245},{245,244,245},{244,244,247},{244,243,247},{245,245,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,246},{246,246,244},{246,247,244},{246,247,245},{245,246,247},{246,245,250},{246,246,248},{246,246,248}},{{249,249,251},{245,245,247},{246,246,248},{244,245,245},{242,243,246},{244,243,248},{246,244,247},{247,247,246},{248,250,247},{247,249,247},{246,247,248},{245,246,248},{245,246,251},{245,246,251},{243,244,249},{243,244,248},{244,244,244},{244,244,244},{245,245,247},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,248},{246,246,247},{246,247,245},{246,246,244},{247,245,243},{249,247,246},{246,245,249},{246,245,251},{246,245,250}},{{249,249,251},{245,245,247},{245,245,247},{245,248,249},{245,248,251},{245,245,247},{247,246,237},{245,243,229},{235,233,226},{238,236,233},{243,240,241},{248,245,249},{246,245,253},{246,245,253},{245,244,252},{245,245,251},{245,246,243},{245,246,241},{246,246,246},{246,245,249},{246,246,249},{246,246,248},{246,246,248},{246,246,248},{245,245,250},{244,244,251},{248,245,249},{247,242,239},{240,235,227},{242,243,235},{245,245,247},{246,245,251}},{{249,249,251},{244,244,246},{233,233,235},{187,192,193},{161,166,169},{160,161,157},{208,207,179},{230,227,188},{215,210,179},{215,209,184},{231,224,205},{240,233,220},{239,236,226},{241,238,229},{242,238,230},{241,238,229},{238,239,229},{244,245,238},{246,246,245},{246,246,250},{246,246,249},{246,246,248},{247,246,248},{247,246,248},{245,245,250},{246,247,252},{240,238,232},{222,216,193},{202,198,164},{206,209,180},{241,242,235},{246,245,250}},{{248,248,250},{245,245,247},{231,231,233},{127,131,133},{39,44,46},{26,27,17},{109,109,70},{169,167,108},{180,174,116},{191,183,131},{203,194,147},{184,175,133},{145,139,102},{149,144,106},{150,146,108},{151,148,114},{186,187,169},{240,241,234},{245,246,245},{246,245,250},{246,246,251},{245,246,250},{245,246,249},{245,246,249},{246,248,248},{229,231,219},{196,198,164},{196,195,140},{185,183,121},{186,191,148},{240,242,229},{247,246,250}},{{249,249,251},{244,244,246},{244,244,246},{233,232,234},{174,173,172},{114,113,100},{112,112,85},{112,110,70},{112,108,59},{125,119,67},{151,143,86},{149,139,83},{124,113,60},{111,103,42},{115,111,51},{151,148,103},{203,204,184},{241,243,237},{246,247,249},{247,247,251},{245,247,252},{246,246,251},{248,247,249},{240,243,241},{216,219,204},{196,197,157},{195,200,138},{197,199,132},{178,178,118},{208,210,176},{246,245,244},{245,245,250}},{{249,249,251},{244,244,246},{244,244,246},{246,244,246},{249,247,245},{239,238,230},{222,221,209},{199,197,178},{124,120,91},{82,77,36},{132,126,71},{171,164,102},{171,162,100},{143,137,68},{147,143,80},{194,191,145},{201,204,180},{211,214,204},{227,229,226},{236,238,235},{245,243,239},{249,242,236},{235,224,212},{209,198,177},{194,183,153},{187,176,134},{165,158,106},{141,137,80},{109,107,52},{187,187,159},{248,246,251},{245,245,249}},{{248,248,250},{244,244,246},{244,244,246},{245,244,244},{242,242,241},{243,243,242},{250,249,249},{253,251,251},{189,185,176},{91,87,61},{96,92,46},{155,152,93},{153,150,88},{149,147,82},{153,151,92},{177,175,130},{197,200,172},{199,203,187},{186,190,179},{166,169,156},{153,152,138},{143,133,117},{115,96,73},{123,102,69},{145,124,86},{132,108,74},{90,68,36},{80,68,26},{100,98,47},{213,212,190},{249,247,251},{244,245,248}},{{247,247,249},{244,244,246},{244,244,246},{244,244,245},{244,244,245},{244,244,247},{242,242,248},{243,242,249},{244,241,245},{179,176,165},{104,101,73},{82,80,40},{89,90,43},{101,102,53},{108,107,60},{120,118,78},{130,134,105},{144,149,131},{161,165,150},{154,159,140},{118,124,106},{87,86,70},{74,64,42},{69,58,29},{74,60,27},{81,58,27},{84,60,28},{100,86,48},{156,155,114},{223,222,207},{247,245,250},{245,246,246}},{{247,247,249},{244,243,246},{244,244,246},{243,244,247},{242,245,247},{242,245,247},{242,245,247},{243,245,247},{244,244,248},{241,240,240},{219,216,209},{140,138,125},{85,88,68},{79,81,56},{86,85,54},{83,81,46},{62,65,40},{55,60,44},{77,81,66},{91,96,75},{106,113,89},{109,112,90},{104,100,78},{88,87,63},{72,72,45},{70,62,26},{94,79,29},{142,132,87},{149,149,121},{205,203,195},{246,244,250},{244,245,244}},{{246,247,248},{243,243,244},{244,244,245},{242,244,247},{241,245,247},{241,245,245},{241,245,243},{241,245,243},{242,244,245},{244,244,248},{252,249,254},{212,210,213},{185,186,184},{160,161,153},{159,159,140},{107,107,79},{61,64,42},{49,53,38},{41,45,31},{38,42,25},{38,41,18},{58,56,29},{76,72,43},{83,83,52},{82,86,58},{74,75,37},{139,133,71},{173,169,114},{129,131,104},{202,201,197},{247,245,250},{242,244,243}},{{245,247,245},{242,243,242},{242,244,243},{242,244,245},{242,243,245},{242,243,245},{242,244,244},{242,243,244},{242,243,245},{242,243,246},{242,242,246},{175,175,177},{159,160,154},{142,143,133},{133,135,120},{105,108,89},{89,96,75},{85,93,75},{72,78,64},{56,63,51},{42,45,34},{47,47,26},{55,55,18},{67,65,21},{79,74,38},{74,68,30},{117,113,58},{176,174,122},{138,137,108},{177,178,176},{247,247,250},{243,244,245}},{{245,247,246},{242,243,242},{242,244,243},{242,243,244},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{243,244,245},{211,213,212},{210,215,207},{178,181,171},{133,134,122},{108,107,94},{89,97,80},{76,88,69},{77,89,69},{80,91,72},{63,69,51},{68,70,46},{72,72,40},{99,96,65},{101,96,59},{62,57,8},{69,66,21},{132,127,103},{203,198,196},{228,229,231},{243,244,246},{242,243,245}},{{245,246,248},{241,243,244},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{242,243,245},{241,242,244},{245,248,248},{243,252,246},{245,249,242},{239,237,230},{218,212,205},{194,193,184},{133,135,122},{60,62,43},{76,80,54},{82,85,57},{79,81,55},{117,117,97},{201,199,188},{171,168,147},{95,92,54},{130,128,99},{212,209,204},{245,241,252},{245,245,248},{242,243,245},{241,242,244}},{{244,245,249},{241,242,246},{241,242,246},{241,242,245},{242,243,245},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{239,242,243},{235,244,242},{240,244,241},{240,238,235},{192,184,181},{182,170,169},{152,140,136},{53,42,30},{68,57,38},{93,90,66},{139,141,122},{214,213,207},{244,244,245},{228,226,225},{210,207,200},{225,223,215},{244,244,240},{242,243,243},{242,243,245},{243,244,246},{243,244,246}},{{243,244,249},{241,241,246},{241,242,247},{241,242,245},{241,242,243},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{241,242,244},{241,242,245},{241,242,246},{242,243,245},{243,242,242},{221,219,217},{214,205,205},{196,185,183},{100,90,83},{121,112,100},{188,184,171},{234,232,228},{245,245,249},{238,242,244},{243,245,248},{248,245,253},{244,243,247},{240,243,241},{240,244,239},{242,243,244},{242,243,245},{242,243,245}},{{243,244,250},{240,241,247},{240,242,247},{240,241,246},{240,241,245},{240,242,245},{241,242,245},{241,242,245},{241,242,245},{241,242,245},{241,242,245},{241,242,245},{242,241,247},{242,241,246},{242,243,245},{246,247,248},{248,248,248},{246,245,244},{209,209,207},{225,225,221},{247,246,244},{244,242,247},{240,240,248},{239,243,246},{239,242,243},{241,240,245},{241,241,247},{240,243,247},{239,243,245},{241,242,245},{241,242,245},{241,242,245}},{{241,244,251},{238,241,247},{238,241,248},{238,241,248},{239,241,248},{239,241,248},{239,242,248},{239,241,247},{240,241,246},{240,241,246},{241,242,246},{241,241,246},{240,241,246},{240,241,246},{241,242,246},{240,241,245},{239,240,245},{240,241,245},{242,243,247},{241,243,246},{240,240,245},{240,240,246},{241,241,247},{240,241,246},{240,242,246},{241,242,246},{241,242,247},{241,242,247},{241,242,247},{241,242,247},{241,242,247},{241,242,247}},{{240,243,250},{237,240,247},{238,241,248},{238,241,248},{237,240,247},{237,240,247},{237,240,247},{238,241,247},{240,241,246},{240,241,246},{239,240,245},{239,240,245},{240,241,246},{240,241,246},{239,240,245},{239,241,246},{240,241,246},{240,241,247},{239,240,245},{240,241,246},{241,242,247},{240,241,246},{240,241,246},{240,241,246},{240,241,246},{240,241,246},{240,241,246},{241,242,247},{241,242,247},{241,242,247},{241,242,247},{241,242,247}},{{239,242,249},{237,240,247},{238,240,247},{237,240,247},{236,239,246},{236,239,246},{236,239,246},{237,240,246},{238,241,246},{237,241,245},{237,240,244},{237,240,245},{238,241,246},{238,241,246},{237,240,245},{237,240,245},{238,241,245},{238,241,246},{238,241,246},{238,241,246},{238,241,246},{238,241,246},{238,241,246},{238,241,246},{238,241,246},{238,241,245},{238,241,246},{239,242,247},{239,242,247},{239,242,247},{239,242,247},{239,242,247}},{{239,242,249},{236,239,246},{236,239,246},{237,240,247},{237,240,247},{236,239,246},{236,239,246},{236,240,246},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{235,241,245},{234,241,244},{235,241,245},{235,242,245},{236,242,246},{236,242,246},{235,242,245},{234,240,244},{235,241,245},{236,242,246},{236,242,246},{236,242,246},{236,242,246},{236,242,246}},{{239,242,249},{236,239,245},{236,239,246},{236,239,246},{236,239,246},{236,239,246},{236,239,246},{235,240,245},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{233,241,244},{234,242,245},{235,243,246},{234,242,245},{233,241,244},{234,242,245},{235,243,246},{235,243,246},{235,243,246},{235,243,246},{235,243,246}},{{237,242,249},{234,239,246},{235,239,246},{234,239,246},{234,238,246},{235,239,246},{235,239,246},{234,239,246},{232,240,245},{232,240,244},{232,240,244},{232,240,244},{232,240,244},{232,240,244},{232,240,244},{232,240,244},{232,240,244},{232,240,245},{233,240,245},{233,241,245},{233,240,245},{232,240,245},{233,241,246},{234,242,247},{234,241,246},{233,240,245},{233,241,245},{234,242,246},{234,242,246},{234,242,247},{234,242,247},{234,242,247}},{{235,242,250},{232,238,246},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{233,240,247},{233,240,248},{233,240,247},{233,240,247},{233,240,248},{233,240,248},{233,240,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{233,240,248},{233,240,248},{233,240,248}},{{235,242,250},{231,239,246},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{233,240,248}},{{235,242,250},{232,238,246},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{231,238,246},{231,238,246},{231,238,246},{231,238,246},{231,238,246},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{232,239,247},{231,238,246},{232,239,246},{232,239,247}}}
2|{1,0}|{{{103,115,158},{102,114,156},{102,114,156},{103,115,155},{103,115,155},{103,115,154},{103,115,155},{104,116,157},{104,116,158},{104,115,157},{103,115,157},{104,115,158},{103,114,157},{103,114,156},{106,117,157},{104,115,156},{103,114,156},{104,114,157},{103,114,157},{108,117,154},{104,110,147},{78,83,124},{98,108,150},{104,115,158},{107,115,155},{123,132,163},{138,145,172},{138,144,172},{141,145,173},{128,132,163},{106,114,152},{102,113,155}},{{104,116,158},{103,115,157},{103,115,157},{104,116,156},{104,116,156},{104,116,156},{104,116,156},{104,116,157},{105,117,158},{105,117,158},{105,117,158},{106,116,157},{108,117,158},{107,116,154},{118,126,162},{118,126,161},{108,117,155},{107,116,157},{106,115,154},{113,118,148},{85,89,120},{52,59,95},{102,113,149},{111,121,157},{117,124,157},{144,150,177},{150,157,179},{143,148,175},{143,145,172},{135,137,164},{119,126,157},{107,115,151}},{{105,117,159},{103,115,157},{104,116,158},{104,116,157},{105,117,157},{105,117,157},{105,117,157},{105,117,157},{106,118,157},{106,118,158},{106,118,158},{111,121,160},{119,127,164},{119,126,160},{133,140,169},{139,145,173},{122,129,163},{116,123,163},{109,117,153},{112,114,140},{74,77,106},{64,71,105},{125,135,166},{129,137,168},{126,132,161},{144,149,173},{145,150,171},{139,144,168},{148,149,172},{161,161,183},{154,157,181},{130,136,164}},{{105,117,160},{104,116,158},{105,117,159},{106,118,158},{105,117,157},{105,117,157},{105,117,157},{106,118,157},{108,120,158},{107,119,158},{108,120,159},{115,125,162},{123,130,163},{133,138,167},{152,155,180},{158,161,183},{137,141,172},{123,129,166},{110,119,151},{109,110,137},{66,69,100},{88,94,127},{143,148,175},{133,138,166},{129,133,161},{136,139,163},{141,143,165},{131,136,160},{147,147,168},{171,169,186},{171,171,189},{159,163,183}},{{106,118,160},{108,119,161},{109,121,163},{108,120,160},{107,119,158},{106,118,157},{106,118,158},{111,123,161},{110,122,160},{109,121,158},{114,125,162},{115,125,160},{128,135,166},{144,147,174},{161,162,183},{161,162,181},{139,141,170},{123,128,163},{110,118,148},{101,103,132},{60,62,97},{115,119,151},{156,157,181},{142,145,171},{132,135,163},{140,141,166},{153,154,177},{148,151,174},{157,157,175},{169,166,180},{172,171,184},{166,168,183}},{{107,118,161},{111,120,162},{112,121,162},{109,119,159},{108,117,157},{109,119,157},{112,123,159},{110,122,158},{108,119,155},{116,126,161},{121,130,164},{120,126,158},{137,142,171},{141,144,171},{151,153,177},{153,154,177},{135,136,166},{124,126,158},{113,117,143},{93,98,126},{59,61,96},{142,144,169},{169,171,191},{159,161,183},{147,149,174},{146,148,171},{161,163,180},{166,168,185},{170,169,185},{171,170,182},{175,175,186},{167,166,179}},{{108,119,161},{113,121,161},{115,123,162},{112,121,161},{109,119,158},{110,120,158},{110,121,157},{110,121,157},{116,126,162},{125,133,168},{121,128,161},{131,136,166},{138,142,169},{135,137,163},{145,147,171},{154,156,179},{145,147,174},{135,137,164},{114,117,139},{80,86,113},{61,63,96},{149,150,171},{156,160,178},{155,159,177},{153,155,175},{156,159,177},{165,168,181},{166,166,181},{172,171,185},{176,176,189},{178,178,190},{165,165,180}},{{110,120,160},{116,124,162},{118,125,163},{113,124,163},{108,120,159},{107,120,156},{109,122,157},{114,124,159},{124,131,167},{126,132,167},{126,131,163},{142,147,173},{143,147,169},{149,151,173},{155,156,176},{159,162,180},{160,163,183},{142,145,166},{106,109,129},{64,70,97},{72,74,106},{153,154,174},{146,149,167},{147,151,168},{161,164,180},{165,168,184},{163,166,179},{157,157,173},{163,162,179},{171,170,185},{170,170,183},{156,159,177}},{{116,124,162},{117,124,160},{124,130,166},{123,132,169},{113,123,160},{112,123,157},{120,131,164},{121,128,162},{123,128,161},{128,132,163},{141,145,174},{151,155,177},{159,162,180},{169,171,187},{170,170,186},{167,170,183},{166,169,183},{136,139,156},{98,102,121},{46,51,81},{87,89,121},{161,162,180},{149,153,172},{153,156,173},{169,172,187},{172,175,190},{157,160,177},{150,151,169},{155,156,175},{160,161,178},{158,159,175},{145,151,172}},{{129,136,173},{122,128,163},{129,134,168},{131,137,170},{122,129,161},{128,135,165},{133,140,169},{130,136,163},{136,141,167},{148,150,175},{158,160,183},{164,168,184},{170,173,187},{178,179,192},{182,182,194},{174,177,189},{168,172,184},{125,128,144},{86,89,111},{39,43,75},{110,112,142},{164,166,183},{152,155,176},{165,168,189},{170,173,189},{166,169,186},{149,151,173},{143,145,167},{152,153,174},{157,158,178},{154,156,175},{138,143,166}},{{134,141,176},{125,131,164},{128,133,164},{137,140,170},{131,134,162},{141,144,170},{149,152,176},{153,157,178},{162,166,186},{155,157,176},{163,164,182},{172,174,187},{177,179,190},{181,182,191},{182,181,191},{179,181,194},{166,170,182},{114,117,134},{77,80,105},{42,47,79},{131,133,161},{162,163,179},{153,156,178},{163,166,190},{157,160,179},{149,152,173},{137,139,166},{139,141,165},{152,154,175},{163,166,185},{155,158,177},{142,145,169}},{{128,134,167},{127,132,163},{132,136,166},{139,144,171},{139,142,171},{151,152,177},{160,161,179},{177,178,192},{164,165,183},{148,147,167},{168,168,185},{178,178,189},{179,178,189},{180,178,189},{179,177,188},{179,181,193},{145,147,159},{97,100,117},{64,71,96},{51,57,86},{141,143,167},{155,157,174},{155,159,179},{157,160,183},{144,146,168},{145,147,170},{144,146,171},{149,151,173},{163,165,184},{172,174,191},{169,172,186},{171,174,190}},{{127,133,164},{133,138,167},{137,142,170},{138,143,170},{132,136,164},{139,141,166},{165,166,183},{190,191,202},{150,149,165},{165,163,182},{178,177,192},{179,179,192},{175,175,188},{174,174,187},{176,176,189},{179,178,189},{155,152,163},{131,130,146},{83,89,113},{76,83,109},{149,152,174},{161,162,181},{156,160,179},{148,150,172},{146,147,170},{147,149,171},{147,149,171},{152,153,173},{166,167,184},{176,178,192},{174,176,189},{172,175,188}},{{133,139,168},{134,138,167},{143,146,173},{141,146,171},{117,121,147},{70,73,97},{131,133,152},{186,186,198},{133,132,145},{169,169,185},{178,177,193},{160,162,179},{130,134,152},{141,144,162},{151,154,172},{146,146,164},{147,144,162},{125,124,145},{61,66,92},{59,66,94},{146,149,172},{166,166,186},{155,158,177},{154,156,176},{157,158,178},{148,149,169},{152,153,172},{162,163,180},{171,172,187},{175,177,190},{164,166,179},{162,164,179}},{{141,147,174},{139,143,169},{149,151,176},{146,149,172},{144,147,170},{61,64,88},{44,48,71},{108,111,127},{131,134,149},{159,161,178},{133,135,156},{74,80,104},{40,46,72},{51,58,83},{57,63,90},{49,57,88},{44,50,80},{36,43,72},{11,22,55},{18,28,59},{110,114,139},{161,160,181},{159,160,180},{163,163,180},{165,165,181},{164,163,180},{173,173,189},{178,179,193},{178,180,193},{172,174,187},{163,165,178},{166,167,182}},{{150,155,180},{150,153,176},{155,156,178},{156,158,179},{166,168,189},{122,126,149},{29,34,62},{27,33,60},{83,90,113},{72,78,103},{30,36,66},{10,20,52},{11,22,54},{12,22,54},{9,20,53},{7,21,58},{9,21,57},{11,23,56},{6,21,55},{14,26,60},{72,76,103},{104,103,125},{129,129,148},{162,162,177},{170,169,182},{174,173,187},{180,179,193},{183,185,195},{180,182,194},{171,173,186},{169,171,184},{173,173,186}},{{151,155,179},{156,158,180},{161,162,183},{159,161,182},{155,158,178},{146,150,173},{68,73,103},{9,18,52},{13,23,54},{16,26,58},{16,26,63},{10,21,59},{6,18,55},{5,18,55},{5,18,55},{5,18,56},{13,22,56},{24,32,62},{20,31,61},{31,42,76},{107,112,141},{128,127,149},{134,132,151},{168,168,181},{177,177,188},{177,177,189},{182,182,193},{185,187,195},{180,182,192},{172,174,186},{172,174,187},{178,178,189}},{{144,148,176},{150,153,181},{146,151,177},{137,145,170},{129,132,166},{140,143,169},{105,108,135},{34,42,76},{27,37,71},{32,42,76},{29,38,74},{27,34,69},{12,20,55},{7,17,53},{5,18,54},{6,19,56},{11,21,55},{47,54,84},{52,59,88},{83,92,122},{137,144,170},{159,161,183},{168,169,187},{175,177,189},{178,180,190},{178,180,189},{183,185,193},{184,186,195},{178,180,190},{172,174,186},{169,171,184},{177,178,189}},{{129,136,169},{127,134,166},{121,129,160},{115,126,158},{117,122,161},{139,141,168},{97,99,127},{89,95,131},{94,103,139},{85,93,130},{79,87,122},{86,90,123},{89,94,127},{52,61,96},{10,23,58},{9,23,59},{13,25,61},{75,82,118},{82,88,122},{112,119,150},{134,141,168},{147,151,173},{162,164,182},{173,175,188},{177,179,190},{179,182,190},{183,186,193},{182,185,193},{177,180,190},{174,176,188},{171,173,186},{176,178,190}},{{115,126,162},{112,123,159},{111,122,158},{111,121,160},{121,127,160},{135,139,162},{89,93,128},{110,117,158},{115,123,163},{114,122,162},{116,124,163},{124,130,166},{131,138,173},{84,95,129},{24,37,72},{15,29,66},{19,30,69},{77,84,124},{93,98,138},{119,124,162},{138,143,174},{156,159,180},{163,164,181},{171,172,186},{175,177,189},{176,178,188},{178,181,189},{180,183,191},{179,181,192},{175,177,189},{173,175,188},{176,178,191}},{{109,123,162},{109,122,161},{109,122,162},{109,119,164},{130,137,165},{123,129,153},{95,100,141},{114,123,167},{113,122,164},{113,122,164},{112,121,163},{114,122,160},{116,124,161},{77,88,123},{29,42,77},{16,30,67},{22,34,74},{95,102,143},{116,120,161},{118,123,162},{141,146,175},{163,166,184},{168,168,183},{169,170,184},{170,173,185},{172,174,185},{174,177,186},{179,182,191},{180,182,192},{173,175,188},{171,173,186},{174,176,189}},{{111,123,163},{109,121,161},{110,121,163},{111,120,165},{138,145,173},{104,110,141},{103,110,152},{113,124,165},{112,123,164},{113,124,164},{113,124,164},{114,124,163},{114,125,162},{63,75,110},{15,28,62},{7,20,60},{37,48,88},{110,118,155},{122,127,162},{127,132,165},{146,150,172},{168,169,183},{170,169,183},{166,167,182},{166,168,182},{167,169,182},{174,176,188},{180,183,192},{179,181,192},{171,173,185},{166,168,181},{168,170,184}},{{113,123,163},{112,121,161},{112,121,163},{114,122,164},{116,123,153},{97,103,144},{110,121,162},{111,124,161},{112,124,162},{112,124,162},{112,124,162},{112,125,164},{108,120,158},{53,66,101},{15,28,62},{10,22,63},{66,77,116},{120,128,160},{135,141,168},{150,156,181},{166,171,185},{178,180,189},{173,171,186},{164,165,181},{161,163,178},{166,168,181},{175,177,189},{179,182,191},{178,181,191},{169,171,184},{162,164,178},{163,165,180}},{{112,124,163},{111,123,162},{111,123,163},{111,122,162},{104,115,151},{107,118,159},{111,124,164},{112,123,162},{113,124,162},{112,124,161},{112,124,161},{113,127,165},{94,107,142},{41,54,88},{20,35,65},{33,43,81},{106,113,149},{136,140,166},{161,164,181},{175,177,192},{183,185,194},{183,184,191},{171,171,184},{162,162,180},{156,158,175},{169,171,186},{175,177,191},{176,179,189},{177,180,191},{169,172,185},{161,163,178},{162,164,181}},{{111,125,165},{110,124,163},{110,124,163},{109,123,162},{110,124,163},{111,125,164},{110,124,163},{112,123,163},{113,124,163},{112,124,162},{113,125,164},{113,125,165},{77,86,118},{37,47,80},{25,39,71},{78,88,122},{141,146,177},{153,155,178},{167,168,183},{173,172,187},{180,181,193},{175,177,188},{162,164,180},{157,158,176},{160,161,178},{175,177,192},{173,176,189},{174,178,189},{173,178,188},{168,171,184},{159,162,177},{162,164,181}},{{112,126,165},{110,124,163},{110,124,163},{110,124,163},{110,124,163},{110,124,163},{110,124,163},{111,124,162},{112,124,165},{113,124,167},{114,124,168},{119,126,164},{115,120,142},{52,58,86},{41,51,89},{121,131,162},{145,153,180},{152,157,180},{156,160,180},{157,159,180},{164,165,184},{160,162,180},{155,156,177},{156,158,176},{169,172,188},{173,177,190},{169,172,184},{173,177,188},{172,176,189},{166,170,184},{160,163,178},{163,165,182}},{{112,126,166},{111,125,164},{111,125,164},{110,124,163},{110,124,163},{111,125,164},{111,125,163},{112,125,162},{113,125,167},{115,124,170},{114,121,163},{149,153,175},{216,220,223},{93,99,116},{75,83,117},{138,149,177},{133,143,168},{135,142,169},{142,148,175},{143,148,177},{141,145,170},{149,152,175},{154,155,179},{160,163,183},{170,175,191},{160,165,179},{160,165,177},{169,173,186},{168,172,186},{165,168,183},{164,167,182},{165,167,184}},{{112,126,166},{111,125,164},{111,125,164},{111,125,164},{111,125,164},{111,125,164},{111,125,163},{111,126,162},{112,124,166},{114,123,166},{123,130,163},{201,206,209},{226,230,226},{97,102,121},{108,118,149},{131,142,172},{122,133,163},{120,130,161},{125,134,166},{126,134,167},{132,138,166},{144,149,173},{151,153,179},{155,159,182},{160,166,186},{152,158,176},{157,162,179},{165,169,186},{164,167,183},{162,165,180},{163,166,181},{165,167,184}},{{112,126,166},{111,125,164},{111,125,164},{112,126,164},{112,126,165},{111,125,164},{111,125,163},{110,126,162},{112,125,166},{113,122,160},{152,160,181},{239,245,239},{173,177,180},{90,95,127},{118,130,166},{118,130,165},{119,129,165},{118,128,164},{118,130,164},{120,131,164},{134,143,171},{143,148,173},{145,147,173},{142,147,173},{143,150,174},{144,151,173},{150,156,177},{158,162,182},{158,161,180},{159,162,179},{160,164,177},{163,165,181}},{{112,126,166},{111,125,164},{111,125,164},{111,125,163},{111,125,163},{111,125,163},{111,125,162},{112,126,162},{111,126,167},{116,127,159},{193,198,206},{239,243,239},{124,129,146},{103,111,153},{116,127,168},{124,133,167},{134,143,173},{126,135,165},{121,130,162},{123,133,167},{137,146,178},{138,145,173},{134,140,168},{129,137,168},{130,138,169},{132,140,169},{135,143,170},{144,150,174},{144,150,174},{145,152,172},{153,158,173},{166,169,183}},{{112,126,166},{111,125,164},{111,125,164},{111,125,162},{111,125,162},{111,125,162},{112,125,162},{114,126,162},{110,124,165},{130,143,170},{231,235,237},{198,201,206},{101,108,135},{116,125,166},{125,134,171},{142,148,177},{152,158,181},{149,155,178},{137,143,169},{129,135,167},{134,141,172},{132,140,168},{136,144,171},{125,134,165},{121,130,163},{126,135,166},{129,139,168},{132,140,166},{130,139,166},{138,147,169},{158,163,179},{172,176,189}},{{112,126,166},{111,125,164},{111,125,164},{111,125,162},{111,125,162},{112,126,163},{113,126,163},{114,126,163},{111,125,165},{135,146,176},{200,205,215},{146,151,169},{110,119,151},{123,132,167},{146,152,180},{154,157,180},{155,158,178},{167,170,189},{156,158,181},{142,147,173},{138,144,169},{139,146,169},{148,155,178},{131,139,167},{128,136,166},{134,143,170},{137,146,171},{138,144,169},{137,144,169},{138,146,168},{158,161,178},{170,173,187}}}
\.
-- normalize the indep variable
-- TODO Calling this function makes keras.fit fail with the exception (investigate later)
-- NOTICE:  Releasing segworker groups to finish aborting the transaction.
-- ERROR:  could not connect to segment: initialization of segworker group failed (cdbgang.c:237)
--update cifar_10_sample_val SET independent_var = array_scalar_mult(independent_var::real[], (1/255.0)::real);

DROP TABLE IF EXISTS cifar_10_sample_batched;
DROP TABLE IF EXISTS cifar_10_sample_batched_summary;
SELECT minibatch_preprocessor_dl('cifar_10_sample','cifar_10_sample_batched','y','x', 2, 255);

DROP TABLE IF EXISTS model_arch;
SELECT load_keras_model('model_arch',
  $${
  "class_name": "Sequential",
  "keras_version": "2.1.6",
  "config": [{
	"class_name": "Conv2D", "config": {"kernel_initializer": {"class_name": "VarianceScaling", "config": {"distribution": "uniform", "scale": 1.0, "seed": null, "mode": "fan_avg"}},
	"name": "conv2d_1",
	"kernel_constraint": null, "bias_regularizer": null, "bias_constraint": null,
	"dtype": "float32", "activation": "relu", "trainable": true,
	"data_format": "channels_last", "filters": 32, "padding": "valid",
	"strides": [1, 1], "dilation_rate": [1, 1], "kernel_regularizer": null,
	"bias_initializer": {"class_name": "Zeros", "config": {}},
	"batch_input_shape": [null, 32, 32, 3], "use_bias": true,
	"activity_regularizer": null, "kernel_size": [3, 3]}},
	{"class_name": "MaxPooling2D", "config": {"name": "max_pooling2d_1", "trainable": true, "data_format": "channels_last", "pool_size": [2, 2], "padding": "valid", "strides": [2, 2]}},
	{"class_name": "Dropout", "config": {"rate": 0.25, "noise_shape": null, "trainable": true, "seed": null, "name": "dropout_1"}},
	{"class_name": "Flatten", "config": {"trainable": true, "name": "flatten_1", "data_format": "channels_last"}},
	{"class_name": "Dense", "config": {"kernel_initializer": {"class_name": "VarianceScaling", "config": {"distribution": "uniform", "scale": 1.0, "seed": null, "mode": "fan_avg"}}, "name": "dense_1", "kernel_constraint": null, "bias_regularizer": null, "bias_constraint": null, "activation": "softmax", "trainable": true, "kernel_regularizer": null, "bias_initializer":
	{"class_name": "Zeros", "config": {}}, "units": 2, "use_bias": true, "activity_regularizer": null}
	}], "backend": "tensorflow"}$$);

-- Please do not break up the compile_params string
-- It might break the assertion

DROP TABLE IF EXISTS keras_saved_out, keras_saved_out_summary;
SELECT madlib_keras_fit(
    'cifar_10_sample_batched',
    'keras_saved_out',
    'dependent_var',
    'independent_var',
    'model_arch',
    1,
    $$ optimizer=SGD(lr=0.01, decay=1e-6, nesterov=True), loss='categorical_crossentropy', metrics=['accuracy']$$::text,
    $$ batch_size=2, epochs=1, verbose=0 $$::text,
    3,
    FALSE,
    'cifar_10_sample_val');

SELECT assert(
        model_arch_table = 'model_arch' AND
        model_arch_id = 1 AND
        model_type = 'madlib_keras' AND
        start_training_time         < now() AND
        end_training_time > start_training_time AND
        source_table = 'cifar_10_sample_batched' AND
        validation_table = 'cifar_10_sample_val' AND
        model = 'keras_saved_out' AND
        dependent_varname = 'dependent_var' AND
        dependent_vartype = 'smallint' AND
        independent_varname = 'independent_var' AND
        normalizing_const = 255.0 AND
        name is NULL AND
        description is NULL AND
        model_size > 0 AND
        madlib_version is NOT NULL AND
        compile_params = $$ optimizer=SGD(lr=0.01, decay=1e-6, nesterov=True), loss='categorical_crossentropy', metrics=['accuracy']$$::text AND
        fit_params = $$ batch_size=2, epochs=1, verbose=0 $$::text AND
        num_iterations = 3 AND
        num_classes = 2 AND
        class_values = '{0,1}' AND
        accuracy >= 0  AND
        loss  >= 0  AND
        array_upper(accuracy_iter, 1) = 3 AND
        array_upper(loss_iter, 1) = 3 AND
        array_upper(time_iter, 1) = 3 AND
        accuracy_validation >= 0 AND
        loss_validation  >= 0  AND
        array_upper(accuracy_iter_validation, 1) = 3 AND
        array_upper(loss_iter_validation, 1) = 3 ,
        'Keras model output Summary Validation failed. Actual:' || __to_char(summary))
FROM (SELECT * FROM keras_saved_out_summary) summary;

SELECT assert(model_data IS NOT NULL , 'Keras model output validation failed') FROM (SELECT * FROM keras_saved_out) k;


-- Test for
  -- Non null name and description columns
	-- Null validation table
DROP TABLE IF EXISTS keras_out, keras_out_summary;
SELECT madlib_keras_fit(
    'cifar_10_sample_batched',
    'keras_out',
    'dependent_var',
    'independent_var',
    'model_arch',
    1,
    $$ optimizer=SGD(lr=0.01, decay=1e-6, nesterov=True), loss='categorical_crossentropy', metrics=['accuracy']$$::text,
    $$ batch_size=2, epochs=1, verbose=0 $$::text,
    2,
    FALSE,
    NULL,
    'model name', 'model desc');
SELECT assert(
    model_arch_table = 'model_arch' AND
    model_arch_id = 1 AND
    model_type = 'madlib_keras' AND
    start_training_time         < now() AND
    end_training_time > start_training_time AND
    source_table = 'cifar_10_sample_batched' AND
    validation_table is NULL AND
    model = 'keras_out' AND
    dependent_varname = 'dependent_var' AND
    independent_varname = 'independent_var' AND
    name = 'model name' AND
    description = 'model desc' AND
    model_size > 0 AND
    madlib_version is NOT NULL AND
    compile_params = $$ optimizer=SGD(lr=0.01, decay=1e-6, nesterov=True), loss='categorical_crossentropy', metrics=['accuracy']$$::text AND
    fit_params = $$ batch_size=2, epochs=1, verbose=0 $$::text AND
    num_iterations = 2 AND
    num_classes = 2 AND
    class_values = '{0,1}' AND
    accuracy is not NULL AND
    loss is not NULL AND
    array_upper(accuracy_iter, 1) = 2 AND
    array_upper(loss_iter, 1) = 2 AND
    array_upper(time_iter, 1) = 2 AND
    accuracy_validation is  NULL AND
    loss_validation is  NULL AND
    array_upper(accuracy_iter_validation,1) = 0 AND
    array_upper(loss_iter_validation,1) = 0 ,
    'Keras model output Summary Validation failed. Actual:' || __to_char(summary))
FROM (SELECT * FROM keras_out_summary) summary;

SELECT assert(model_data IS NOT NULL , 'Keras model output validation failed') FROM (SELECT * FROM keras_out) k;

DROP TABLE IF EXISTS cifar10_predict;
SELECT madlib_keras_predict(
    'keras_saved_out',
    'cifar_10_sample',
    'id',
    'x',
    'cifar10_predict');

-- Validate that prediction output table exists and has correct schema
SELECT assert(UPPER(atttypid::regtype::TEXT) = 'INTEGER', 'id column should be INTEGER type')
    FROM pg_attribute WHERE attrelid = 'cifar10_predict'::regclass
        AND attname = 'id';

SELECT assert(UPPER(atttypid::regtype::TEXT) =
    'DOUBLE PRECISION', 'prediction column should be DOUBLE PRECISION type')
    FROM pg_attribute WHERE attrelid = 'cifar10_predict'::regclass
        AND attname = 'prediction';

-- Validate correct number of rows returned.
SELECT assert(COUNT(*)=2, 'Output table of madlib_keras_predict should have two rows') FROM cifar10_predict;

-- First test that all values are in set of class values; if this breaks, it's definitely a problem.
SELECT assert(prediction in (0,1),'Predicted value not in set of defined class values for model') FROM cifar10_predict;

-- Then test that each of the two images is correctly predicted.  If this breaks, it's likely a different problem.
SELECT assert(prediction=0,'Incorrect prediction for first image.  Predicted: ' || __to_char(prediction) || ', Expected: 0') FROM cifar10_predict WHERE id=1;
SELECT assert(prediction=1,'Incorrect prediction for second image.  Predicted: ' || __to_char(prediction) || ', Expected: 1') FROM cifar10_predict WHERE id=2;

select assert(trap_error($TRAP$madlib_keras_predict(
    'keras_saved_out',
    'cifar_10_sample_batched',
    'id',
    'x',
    'cifar10_predict');$TRAP$) = 1,
    'Passing batched image table to predict should error out.');

DROP TABLE IF EXISTS keras_out, keras_out_summary;
SELECT madlib_keras_fit(
    'cifar_10_sample_batched',
    'keras_out',
    'dependent_var',
    'independent_var',
    'model_arch',
    1,
    $$ optimizer='SGD', loss=losses.categorical_crossentropy, metrics=['accuracy']$$::text,
    $$ batch_size=2, epochs=1, verbose=0 $$::text,
    1,
    FALSE,
    NULL,
    'model name', 'model desc');

-- -- negative test case for passing non numeric y to fit
-- induce failure by passing a non numeric column
create table cifar_10_sample_val_failure as select * from cifar_10_sample_val;
alter table cifar_10_sample_val_failure rename dependent_var to dependent_var_original;
alter table cifar_10_sample_val_failure rename id to dependent_var;
DROP TABLE IF EXISTS keras_out, keras_out_summary;
select assert(trap_error($TRAP$madlib_keras_fit(
           'cifar_10_sample_batched',
           'keras_out',
           'dependent_var',
           'independent_var',
           'model_arch',
           1,
           $$ optimizer=SGD(lr=0.01, decay=1e-6, nesterov=True), loss='categorical_crossentropy', metrics=['accuracy']$$::text,
           $$ batch_size=2, epochs=1, verbose=0 $$::text,
           2,
           FALSE,
          'cifar_10_sample_val_failure');$TRAP$) = 1,
       'Passing y of type non numeric array to fit should error out.');

